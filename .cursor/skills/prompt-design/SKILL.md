---
name: prompt-design
description: 提示词设计方法论，指导如何写出精确、可读、简洁的提示词。当用户要求设计提示词、优化提示词、审查提示词质量、或询问提示词写法时使用。
---

# Prompt Design Rules

与用户对话，理解需求，按设计规范和原则逐步生成或修改提示词。

提示词设计以精确、流畅可读和简洁为核心。所有约束必须可验证，模糊词如"简短"和"详细"需量化为字数或结构；优先写成流畅的句子，避免加号、斜杠和括号补充打断阅读；删除不影响输出的词，禁止修辞、比喻和寒暄。规则和数据要分离，规则写规则区，素材原样放数据区。失败行为要可控，信息不足时明确是问、拒绝还是用默认值，约束冲突时定义优先级。强调词要克制使用，ALWAYS 和 NEVER 仅用于核心禁止项，一份提示词中通常两到五处即可。

<workflow>
首先通过对话理解用户的需求，明确提示词要完成什么任务、交付什么结果。如果信息不足，一次性列出三到七个问题请用户澄清，每个问题带选项方便用户快速回答。

确认需求后，按照设计原则生成或修改提示词。输出提示词后等待用户反馈，不主动解释设计原因，除非用户问。

用户指出问题就修改对应部分，用户要求调整就确认影响后修改。每次只改用户指出的内容和直接关联引用它的部分，不自作主张扩展或重构。
</workflow>

<philosophy>
1. 精确优先
   提供给模型的信息不能少也不能冗余。模型做判断所需的依据必须完整提供，同时不要引入干扰的多余信息。如果某些信息可能有用也可能没用，要明确告诉模型这些是背景参考，需要根据具体情况判断是否采用。约束要可验证，模糊词如"简短"和"详细"应量化为字数或定义具体结构。

2. 流畅可读
   优先写成流畅的句子，让规则像正常文章一样可以连续阅读。避免用加号、斜杠和括号补充打断句子，能融入句子的信息就直接写进去，不用不必要的括号补充。枚举多个选项时用顿号或"和""或"连接，不要用斜杠分隔。括号仅在引用术语、写代码注释或列选项时使用。

   <bad_example>
   - 改写为：目标 + 约束 + 交付物 + 验收标准
   - 输出结构：根因（一句话）+ 修复动作（最小集合）+ 风险点（最多 2 条）
   - 列出 3-7 个疑问，每题带 2-5 个选项 + "其他" + "不确定/由你建议"
   </bad_example>

   <good_example>
   - 改写为目标、约束、交付物和验收标准
   - 输出包含根因一句话、最小修复动作和最多两条风险点
   - 列出 3 到 7 个疑问，每题带 2 到 5 个选项以及"其他"和"不确定由你建议"
   </good_example>

3. 简洁优先
   删除不影响模型输出的词。如果去掉某个词或句子后模型行为不变，就应该删掉它。非必要不使用形容词，禁止修辞、比喻和情绪化表达，例如"像私人助理一样""X不是Y而是Z"这类说法都要避免。但简洁不等于丢失关键信息，行为约束、边界定义、失败策略这些影响模型行为的内容必须保留，具体区分见 `<simplification>`。

4. 规则与数据分离
   规则和素材要放在不同的区域，不要混在一起。规则描述模型应该怎么做，素材是模型要处理的原始内容。素材应该原样放置，不要在素材中夹带指令，也不要在规则中嵌入大段素材。

5. 失败可控
   提示词要定义模型在异常情况下的行为。信息不足时是询问用户、拒绝执行还是使用默认值，需要明确指定。多条约束冲突时要定义优先级，告诉模型先满足哪个。遇到非法输入时要定义拒绝的格式和措辞。

6. 强调词使用克制
   ALWAYS、NEVER 和 MUST 这类强调词仅用于核心禁止项，例如不猜测、不编造。其他规则用普通陈述句即可。一份提示词中强调词通常控制在两到五处，过多会稀释强调效果。
</philosophy>

<simplification>
简洁不等于丢失关键信息，关键是区分修饰性内容和实质性内容。

修饰性内容应该删除，包括修辞表达、形容词堆砌、比喻以及不可验证的模糊词。

<example name="修饰性内容">
- 修辞：把"X"变成"Y"、引号包裹的比喻
- 形容词堆砌：非常专业的、丰富的、优秀的
- 比喻：没有别的路可走、像...一样
- 寒暄：请帮我、希望你、谢谢
- 不可验证词：尽量、适当、详细一点、简单说明
</example>

实质性内容必须保留，包括行为约束、关键条件、失败策略、边界定义和触发条件。

<example name="实质性内容">
- 行为约束：信息不足时停下来问、默认不解释
- 关键条件：除非用户要求、除非用户授权
- 失败策略：不猜测、输出澄清清单
- 边界定义：非目标、Out-of-scope
- 触发条件：仅在...时、当...时
</example>

判断标准：删了之后模型行为会不会变？会变就保留，不变就删除。
</simplification>

<format_spec>
1. 总纲前置
   标题后紧跟一句话定位和一段核心原则总纲。总纲压缩关键点，让读者只看开头就能抓住全貌。后续内容展开总纲，补充引入总纲未提及的细节规则。

2. XML 标签分块
   用 XML 标签隔离不同性质内容，标签名用小写下划线如 `<output_format>` 和 `<constraints>`，嵌套不超过两层。

3. Markdown 使用边界
   列表用 `-` 或 `1.`，代码块用于模板和 Schema。加粗仅在极少数必要时使用，优先用 ALWAYS 和 NEVER 替代。禁止其他装饰。

4. 禁止词
   寒暄词如"请"、"谢谢"、"希望"；模糊词如"尽量"、"适当"、"详细一点"、"简单说明"；自吹词如"你是一个非常专业的..."、"你拥有丰富的..."。
</format_spec>

<prompt_template>
最小提示词结构参考：

```xml
<role>
一句话角色
</role>

<goal>
一句话目标
</goal>

<constraints>
- MUST: ...
- NEVER: ...
</constraints>

<input>
素材区
</input>

<output_format>
模板或 Schema
</output_format>
```

可选扩展：
- `<priority>` 定义约束冲突时的优先级
- `<examples>` 提供 1 个正例和 1 个反例
- `<edge_cases>` 处理空值、冲突、非法输入
- `<acceptance>` 验收清单
</prompt_template>

<clarification_format>
提问格式：

```
需要确认：

Q1. ...?
- A. ...
- B. ...
- 其他: _____

Q2. ...?
...
```
</clarification_format>

<self_check>
- [ ] 无修辞，如引号比喻、把X变成Y
- [ ] 无形容词堆砌，已量化的除外
- [ ] 无寒暄词，如请、谢谢、希望
- [ ] 无不可验证词，如尽量、适当、详细一点
- [ ] 无不必要符号连接词，如不必要的加号、斜杠、括号补充
- [ ] ALWAYS/NEVER 仅用于核心禁止项，控制在2至5处
- [ ] 行为约束已保留，包括条件、边界、失败策略
- [ ] 有明确输出格式
- [ ] 关键约束用 ALWAYS/NEVER
- [ ] 规则与数据分离
- [ ] 失败行为已定义，或已确认不需要
- [ ] 修改标签名或术语时已同步更新所有引用
</self_check>
